"use strict";(()=>{var a="114",l="114.0.1823.82";var m="2.5.0";var d={type:"git",url:"https://github.com/ha0z1/New-Bing-Anywhere"};var f=()=>{try{let e=chrome.i18n.getUILanguage().toLowerCase();return e==="zh-cn"||e==="zh-tw"||e==="zh-hk"||e==="zh"}catch{return!1}};var y="configV1",v=async()=>({showGoogleButtonOnBing:!0,showBingButtonOnGoogle:!0,showGuideToGithub:!0,showChat:!1,showRelease:!1,triggerMode:"Always",conversationStyle:"Balanced","X-Forwarded-For":void 0,...(await chrome.storage.sync.get(y))[y]});var u=navigator.userAgent,k=navigator.userAgentData,I=u.includes("Macintosh");var A=u.includes("Edg/"),_=k?.brands.findIndex(e=>e.brand==="Brave")>-1,N=f();var w=!!globalThis.__NBA_isCanary,C=w?`0.${m}`:m,b=()=>{let e=u;return A||(I?e=`Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/${a}.0.0.0 Safari/537.36 Edg/${l}`:e=`Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/${a}.0.0.0 Safari/537.36 Edg/${l}`),e},x=async e=>{let t=d.url;try{let n=await v(),g=`${t}/issues/new?title=&body=`,r="Please write your comment ABOVE this line, provide as much detailed information and screenshots as possible.Please confirm that you have read the #8 https://github.com/ha0z1/New-Bing-Anywhere/issues/8.The UA may not necessarily reflect your actual browser and platform, so please make sure to indicate them clearly.";N&&(r="\u8BF7\u5728\u6B64\u884C\u4E0A\u65B9\u53D1\u8868\u60A8\u7684\u8BA8\u8BBA\u3002\u8BF7\u786E\u8BA4\u5DF2\u7ECF\u9605\u8BFB\u4E86FAQ(https://github.com/ha0z1/New-Bing-Anywhere/issues/8)\uFF0C\u8BE6\u5C3D\u7684\u63CF\u8FF0\u548C\u622A\u56FE\u6709\u52A9\u4E8E\u6211\u4EEC\u5B9A\u4F4D\u95EE\u9898\uFF0C\u63CF\u8FF0\u4E0D\u6E05\u7684\u95EE\u9898\u4F1A\u88AB\u5173\u95ED\uFF0CUA \u4E0D\u4E00\u5B9A\u771F\u5B9E\u53CD\u6620\u60A8\u7684\u6D4F\u89C8\u5668\u548C\u5E73\u53F0\uFF0C\u8BF7\u5907\u6CE8\u6E05\u695A");let p=` 



<!--  ${r} -->
<pre>
`+Object.entries({Version:`${C}${w?" (Canary)":""} `,UA:navigator.userAgent,Lang:chrome.i18n.getUILanguage(),AcceptLangs:(await chrome.i18n.getAcceptLanguages()).join(", "),config:JSON.stringify(n),...e}).map(([s,i])=>i?`${s}: ${i}`:"").join(`
`)+"</pre>";return g+=encodeURIComponent(p.slice(0,2e3)),g}catch{return t}},T=(e="",t)=>{try{return new URL(e,t)}catch{return{searchParams:{get:()=>null}}}};var c=async e=>{let t=await chrome.tabs.query({currentWindow:!0}),n=T(e),o=t.find(g=>g.url?.startsWith(n.origin));return o==null?o=await chrome.tabs.create({url:e}):await Promise.all([chrome.tabs.move(o.id,{index:t.length-1}),o.url!==e&&chrome.tabs.update(o.id,{url:e}),chrome.tabs.update(o.id,{active:!0,url:o.url!==e?e:void 0})].filter(Boolean)),o};var B={openCopilot:{emoji:"\u{1F697}",icon:chrome.runtime.getURL("images/copilot.png"),title:"Copilot",contexts:["action"],onclick:e=>{c("https://copilot.microsoft.com/")}},openChat:{emoji:"\u{1F4AC}",icon:chrome.runtime.getURL("images/bing-chat.png"),title:"New Bing",contexts:["action"],onclick:e=>{c("https://www.bing.com/search?q=Bing+AI&showconv=1")}},openImageCreate:{emoji:"\u{1F5BC}\uFE0F",icon:chrome.runtime.getURL("images/designer.svg"),title:"New Bing Image Creator",contexts:["action"],onclick:e=>{c("https://www.bing.com/create")}},likeIt:{emoji:"\u2764\uFE0F",icon:chrome.runtime.getURL("images/like.png"),title:"Like it",contexts:["action"],onclick:()=>{c("https://chrome.google.com/webstore/detail/new-bing-anywhere-bing-ch/hceobhjokpdbogjkplmfjeomkeckkngi/reviews?hl=en")}},reportIssues:{emoji:"\u{1F41B}",icon:chrome.runtime.getURL("images/bugs.png"),title:"Report issues",contexts:["action"],onclick:async e=>{let t=await x();c(t)}}};try{let e=b();Object.defineProperty(navigator,"userAgent",{get:()=>e});let t=navigator.userAgentData,n=t?.brands;if(Array.isArray(n)&&Object.defineProperty(navigator,"userAgentData",{get:()=>({...JSON.parse(JSON.stringify(t)),brands:[{brand:"Not.A/Brand",version:"8"},{brand:"Chromium",version:a},{brand:"Microsoft Edge",version:a}]})}),location.pathname==="/search"){let o=0,g=200,r=()=>{if(o>g)return;++o;let s=window._w?._sydConvConfig;if(s){let i=",iycapbing,iyxapbing";(s.sydOptionSets??"").includes(i)?requestIdleCallback(r):(s.sydOptionSets+=i,s.enableVisualSearch=!0)}else requestIdleCallback(r)};r()}}catch{}})();
